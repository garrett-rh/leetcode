name: LeetCode Golang Tester

trigger:
- main

pool: self-hosted agents


stages:
- stage: run_tests
  jobs:
    - job: 
      container: golang:latest
      steps:
      - bash: go version
        displayName: Display Go Version
      - bash: go test -v ./...
        displayName: Run Tests
      displayName: Run test cases

- stage: publish_test_coverage
  jobs:
    - job: 
      container: golang:latest
      steps:
        - bash: go tool cover -func=coverage.out
          displayName: Get test coverage
        - bash: go tool cover -html=coverage.out
          displayName: Display go test coverage
      displayName: Display test coverage